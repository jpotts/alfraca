var TableTools;(function(c,b,a){TableTools=function(d,e){if(!this.CLASS||this.CLASS!="TableTools"){alert("Warning: TableTools must be initialised with the keyword 'new'")}this.s={that:this,dt:null,print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:false,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:false};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}};this.fnSettings=function(){return this.s};if(typeof e=="undefined"){e={}}this.s.dt=d.fnSettings();this._fnConstruct(e);return this};TableTools.prototype={fnGetSelected:function(){var d=this._fnGetMasterSettings();return d.select.selected},fnIsSelected:function(g){var f=this.fnGetSelected();for(var e=0,d=f.length;e<d;e++){if(g==f[e]){return true}}return false},fnSelectAll:function(){var d=this._fnGetMasterSettings();d.that._fnRowSelectAll()},fnSelectNone:function(){var d=this._fnGetMasterSettings();d.that._fnRowDeselectAll()},fnGetTitle:function(f){var d="";if(typeof f.sTitle!="undefined"&&f.sTitle!==""){d=f.sTitle}else{var e=a.getElementsByTagName("title");if(e.length>0){d=e[0].innerHTML}}if("\u00A1".toString().length<4){return d.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"")}else{return d.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")}},fnCalcColRatios:function(j){var h=this.s.dt.aoColumns,e=this._fnColumnTargets(j.mColumns),g=[],k=0,l=0,f,d;for(f=0,d=e.length;f<d;f++){if(e[f]){k=h[f].nTh.offsetWidth;l+=k;g.push(k)}}for(f=0,d=g.length;f<d;f++){g[f]=g[f]/l}return g.join("\t")},fnGetTableData:function(d){if(this.s.dt){return this._fnGetDataTablesData(d)}},fnSetText:function(d,e){this._fnFlashSetText(d,e)},fnResizeButtons:function(){for(var d in ZeroClipboard.clients){if(d){var e=ZeroClipboard.clients[d];if(typeof e.domElement!="undefined"&&e.domElement.parentNode==this.dom.container){e.positionElement()}}}},fnResizeRequired:function(){for(var d in ZeroClipboard.clients){if(d){var e=ZeroClipboard.clients[d];if(typeof e.domElement!="undefined"&&e.domElement.parentNode==this.dom.container&&e.sized===false){return true}}}return false},_fnConstruct:function(d){this._fnCustomiseSettings(d);this.dom.container=a.createElement("div");this.dom.container.style.position="relative";this.dom.container.className=!this.s.dt.bJUI?"DTTT_container":"DTTT_container ui-buttonset ui-buttonset-multi";if(this.s.select.type!="none"){this._fnRowSelectConfig()}this._fnButtonDefinations(this.s.buttonSet,this.dom.container)},_fnCustomiseSettings:function(d){if(typeof this.s.dt._TableToolsInit=="undefined"){this.s.master=true;this.s.dt._TableToolsInit=true}this.dom.table=this.s.dt.nTable;this.s.custom=c.extend({},TableTools.DEFAULTS,d);this.s.swfPath=this.s.custom.sSwfPath;if(typeof ZeroClipboard!="undefined"){ZeroClipboard.moviePath=this.s.swfPath}this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.select.selectedClass=this.s.custom.sSelectedClass;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(g,j){var e;for(var f=0,d=g.length;f<d;f++){if(typeof g[f]=="string"){if(typeof TableTools.BUTTONS[g[f]]=="undefined"){alert("TableTools: Warning - unknown button type: "+g[f]);continue}e=c.extend({},TableTools.BUTTONS[g[f]],true)}else{if(typeof TableTools.BUTTONS[g[f].sExtends]=="undefined"){alert("TableTools: Warning - unknown button type: "+g[f].sExtends);continue}var h=c.extend({},TableTools.BUTTONS[g[f].sExtends],true);e=c.extend(h,g[f],true)}if(this.s.dt.bJUI){e.sButtonClass+=" ui-button ui-state-default";e.sButtonClassHover+=" ui-button ui-state-default ui-state-hover"}j.appendChild(this._fnCreateButton(e))}},_fnCreateButton:function(e){var d=this._fnButtonBase(e);if(e.sAction=="print"){this._fnPrintConfig(d,e)}else{if(e.sAction.match(/flash/)){this._fnFlashConfig(d,e)}else{if(e.sAction=="text"){this._fnTextConfig(d,e)}else{if(e.sAction=="collection"){this._fnTextConfig(d,e);this._fnCollectionConfig(d,e)}}}}return d},_fnButtonBase:function(g){var e=a.createElement("button"),d=a.createElement("span"),f=this._fnGetMasterSettings();e.className="DTTT_button "+g.sButtonClass;e.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+f.buttonCounter);e.appendChild(d);d.innerHTML=g.sButtonText;f.buttonCounter++;return e},_fnGetMasterSettings:function(){if(this.s.master){return this.s}else{var f=TableTools._aInstances;for(var e=0,d=f.length;e<d;e++){if(this.dom.table==f[e].s.dt.nTable){return f[e].s}}}},_fnCollectionConfig:function(d,e){var f=a.createElement("div");f.style.display="none";f.className=!this.s.dt.bJUI?"DTTT_collection":"DTTT_collection ui-buttonset ui-buttonset-multi";e._collection=f;this._fnButtonDefinations(e.aButtons,f)},_fnCollectionShow:function(h,l){var o=this,q=c(h).offset(),j=l._collection,e=q.left,d=q.top+c(h).outerHeight(),n=c(b).height(),k=c(a).height(),m=c(b).width(),p=c(a).width();j.style.position="absolute";j.style.left=e+"px";j.style.top=d+"px";j.style.display="block";c(j).css("opacity",0);var f=a.createElement("div");f.style.position="absolute";f.style.left="0px";f.style.top="0px";f.style.height=((n>k)?n:k)+"px";f.style.width=((m>p)?m:p)+"px";f.className="DTTT_collection_background";c(f).css("opacity",0);a.body.appendChild(f);a.body.appendChild(j);var g=c(j).outerWidth();var r=c(j).outerHeight();if(e+g>p){j.style.left=(p-g)+"px"}if(d+r>k){j.style.top=(d-r-c(h).outerHeight())+"px"}this.dom.collection.collection=j;this.dom.collection.background=f;setTimeout(function(){c(j).animate({opacity:1},500);c(f).animate({opacity:0.25},500)},10);c(f).click(function(){o._fnCollectionHide.call(o,null,null)})},_fnCollectionHide:function(d,e){if(e!==null&&e.sExtends=="collection"){return}if(this.dom.collection.collection!==null){c(this.dom.collection.collection).animate({opacity:0},500,function(f){this.style.display="none"});c(this.dom.collection.background).animate({opacity:0},500,function(f){this.parentNode.removeChild(this)});this.dom.collection.collection=null;this.dom.collection.background=null}},_fnRowSelectConfig:function(){if(this.s.master){var f=this,e,d,g=this.s.dt.aoOpenRows;c(f.s.dt.nTable).addClass("DTTT_selectable");c("tr",f.s.dt.nTBody).live("click",function(h){if(this.parentNode!=f.s.dt.nTBody){return}for(e=0,d=g.length;e<d;e++){if(this==g[e].nTr){return}}if(f.s.select.preRowSelect!==null&&!f.s.select.preRowSelect.call(f,h)){return}if(f.s.select.type=="single"){f._fnRowSelectSingle.call(f,this)}else{f._fnRowSelectMulti.call(f,this)}});f.s.dt.aoDrawCallback.push({fn:function(){if(f.s.select.all&&f.s.dt.oFeatures.bServerSide){f.fnSelectAll()}},sName:"TableTools_select"})}},_fnRowSelectSingle:function(d){if(this.s.master){if(c("td",d).hasClass(this.s.dt.oClasses.sRowEmpty)){return}if(c(d).hasClass(this.s.select.selectedClass)){this._fnRowDeselect(d)}else{if(this.s.select.selected.length!==0){this._fnRowDeselectAll()}this.s.select.selected.push(d);c(d).addClass(this.s.select.selectedClass);if(this.s.select.postSelected!==null){this.s.select.postSelected.call(this,d)}}TableTools._fnEventDispatch(this,"select",d)}},_fnRowSelectMulti:function(d){if(this.s.master){if(c("td",d).hasClass(this.s.dt.oClasses.sRowEmpty)){return}if(c(d).hasClass(this.s.select.selectedClass)){this._fnRowDeselect(d)}else{this.s.select.selected.push(d);c(d).addClass(this.s.select.selectedClass);if(this.s.select.postSelected!==null){this.s.select.postSelected.call(this,d)}}TableTools._fnEventDispatch(this,"select",d)}},_fnRowSelectAll:function(){if(this.s.master){var f;for(var e=0,d=this.s.dt.aiDisplayMaster.length;e<d;e++){f=this.s.dt.aoData[this.s.dt.aiDisplayMaster[e]].nTr;if(!c(f).hasClass(this.s.select.selectedClass)){this.s.select.selected.push(f);c(f).addClass(this.s.select.selectedClass)}}this.s.select.all=true;TableTools._fnEventDispatch(this,"select",null)}},_fnRowDeselectAll:function(){if(this.s.master){for(var d=this.s.select.selected.length-1;d>=0;d--){this._fnRowDeselect(d)}this.s.select.all=false;TableTools._fnEventDispatch(this,"select",null)}},_fnRowDeselect:function(e){if(typeof e.nodeName!="undefined"){e=c.inArray(e,this.s.select.selected)}var d=this.s.select.selected[e];c(d).removeClass(this.s.select.selectedClass);this.s.select.selected.splice(e,1);if(this.s.select.postDeselected!==null){this.s.select.postDeselected.call(this,d)}this.s.select.all=false},_fnTextConfig:function(d,f){var e=this;if(f.fnInit!==null){f.fnInit.call(this,d,f)}if(f.sToolTip!==""){d.title=f.sToolTip}c(d).hover(function(){c(d).removeClass(f.sButtonClass).addClass(f.sButtonClassHover);if(f.fnMouseover!==null){f.fnMouseover.call(this,d,f,null)}},function(){c(d).removeClass(f.sButtonClassHover).addClass(f.sButtonClass);if(f.fnMouseout!==null){f.fnMouseout.call(this,d,f,null)}});if(f.fnSelect!==null){TableTools._fnEventListen(this,"select",function(g){f.fnSelect.call(e,d,f,g)})}c(d).click(function(g){g.preventDefault();if(f.fnClick!==null){f.fnClick.call(e,d,f,null)}if(f.fnComplete!==null){f.fnComplete.call(e,d,f,null,null)}e._fnCollectionHide(d,f)})},_fnFlashConfig:function(e,g){var f=this;var d=new ZeroClipboard.Client();if(g.fnInit!==null){g.fnInit.call(this,e,g)}d.setHandCursor(true);if(g.sAction=="flash_save"){d.setAction("save");d.setCharSet((g.sCharSet=="utf16le")?"UTF16LE":"UTF8");d.setBomInc(g.bBomInc);d.setFileName(g.sFileName.replace("*",this.fnGetTitle(g)))}else{if(g.sAction=="flash_pdf"){d.setAction("pdf");d.setFileName(g.sFileName.replace("*",this.fnGetTitle(g)))}else{d.setAction("copy")}}d.addEventListener("mouseOver",function(h){c(e).removeClass(g.sButtonClass).addClass(g.sButtonClassHover);if(g.fnMouseover!==null){g.fnMouseover.call(f,e,g,d)}});d.addEventListener("mouseOut",function(h){c(e).removeClass(g.sButtonClassHover).addClass(g.sButtonClass);if(g.fnMouseout!==null){g.fnMouseout.call(f,e,g,d)}});d.addEventListener("mouseDown",function(h){if(g.fnClick!==null){g.fnClick.call(f,e,g,d)}});d.addEventListener("complete",function(h,j){if(g.fnComplete!==null){g.fnComplete.call(f,e,g,d,j)}f._fnCollectionHide(e,g)});this._fnFlashGlue(d,e,g.sToolTip)},_fnFlashGlue:function(d,f,g){var e=this;var h=f.getAttribute("id");if(a.getElementById(h)){d.glue(f,g);if(d.domElement.parentNode!=d.div.parentNode&&typeof e.__bZCWarning=="undefined"){e.s.dt.oApi._fnLog(this.s.dt,0,"It looks like you are using the version of ZeroClipboard which came with TableTools 1. Please update to use the version that came with TableTools 2.");e.__bZCWarning=true}}else{setTimeout(function(){e._fnFlashGlue(d,f,g)},100)}},_fnFlashSetText:function(h,e){var g=this._fnChunkData(e,8192);h.clearText();for(var f=0,d=g.length;f<d;f++){h.appendText(g[f])}},_fnColumnTargets:function(d){var f=[];var e=this.s.dt;if(typeof d=="object"){for(i=0,iLen=e.aoColumns.length;i<iLen;i++){f.push(false)}for(i=0,iLen=d.length;i<iLen;i++){f[d[i]]=true}}else{if(d=="visible"){for(i=0,iLen=e.aoColumns.length;i<iLen;i++){f.push(e.aoColumns[i].bVisible?true:false)}}else{if(d=="hidden"){for(i=0,iLen=e.aoColumns.length;i<iLen;i++){f.push(e.aoColumns[i].bVisible?false:true)}}else{for(i=0,iLen=e.aoColumns.length;i<iLen;i++){f.push(true)}}}}return f},_fnNewline:function(d){if(d.sNewLine=="auto"){return navigator.userAgent.match(/Windows/)?"\r\n":"\n"}else{return d.sNewLine}},_fnGetDataTablesData:function(l){var k,f,h,q;var o="",m="";var e=this.s.dt;var n=new RegExp(l.sFieldBoundary,"g");var g=this._fnColumnTargets(l.mColumns);var d=this._fnNewline(l);if(l.bHeader){for(k=0,f=e.aoColumns.length;k<f;k++){if(g[k]){m=e.aoColumns[k].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"");m=this._fnHtmlDecode(m);o+=this._fnBoundData(m,l.sFieldBoundary,n)+l.sFieldSeperator}}o=o.slice(0,l.sFieldSeperator.length*-1);o+=d}for(h=0,q=e.aiDisplay.length;h<q;h++){if(typeof l.bSelectedOnly&&l.bSelectedOnly&&!c(e.aoData[e.aiDisplay[h]].nTr).hasClass(this.s.select.selectedClass)){continue}for(k=0,f=e.aoColumns.length;k<f;k++){if(g[k]){var p=e.aoData[e.aiDisplay[h]]._aData[k];if(typeof p=="string"){m=p.replace(/\n/g," ");m=m.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3");m=m.replace(/<.*?>/g,"")}else{m=p+""}m=m.replace(/^\s+/,"").replace(/\s+$/,"");m=this._fnHtmlDecode(m);o+=this._fnBoundData(m,l.sFieldBoundary,n)+l.sFieldSeperator}}o=o.slice(0,l.sFieldSeperator.length*-1);o+=d}o.slice(0,-1);if(l.bFooter){for(k=0,f=e.aoColumns.length;k<f;k++){if(g[k]&&e.aoColumns[k].nTf!==null){m=e.aoColumns[k].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,"");m=this._fnHtmlDecode(m);o+=this._fnBoundData(m,l.sFieldBoundary,n)+l.sFieldSeperator}}o=o.slice(0,l.sFieldSeperator.length*-1)}_sLastData=o;return o},_fnBoundData:function(d,f,e){if(f===""){return d}else{return f+d.replace(e,"\\"+f)+f}},_fnChunkData:function(d,f){var g=[];var h=d.length;for(var e=0;e<h;e+=f){if(e+f<h){g.push(d.substring(e,e+f))}else{g.push(d.substring(e,h))}}return g},_fnHtmlDecode:function(e){if(e.indexOf("&")==-1){return e}var f=this._fnChunkData(e,2048),l=a.createElement("div"),g,d,j,k="",h;for(g=0,d=f.length;g<d;g++){j=f[g].lastIndexOf("&");if(j!=-1&&f[g].length>=8&&j>f[g].length-8){h=f[g].substr(j);f[g]=f[g].substr(0,j)}l.innerHTML=f[g];k+=l.childNodes[0].nodeValue}return k},_fnPrintConfig:function(d,f){var e=this;if(f.fnInit!==null){f.fnInit.call(this,d,f)}c(d).hover(function(){c(d).removeClass(f.sButtonClass).addClass(f.sButtonClassHover)},function(){c(d).removeClass(f.sButtonClassHover).addClass(f.sButtonClass)});if(f.fnSelect!==null){TableTools._fnEventListen(this,"select",function(g){f.fnSelect.call(e,d,f,g)})}c(d).click(function(g){g.preventDefault();e._fnPrintStart.call(e,g,f);if(f.fnClick!==null){f.fnClick.call(e,d,f,null)}if(f.fnComplete!==null){f.fnComplete.call(e,d,f,null,null)}e._fnCollectionHide(d,f)})},_fnPrintStart:function(k,h){var j=this;var f=this.s.dt;this._fnPrintHideNodes(f.nTable);this.s.print.saveStart=f._iDisplayStart;this.s.print.saveLength=f._iDisplayLength;if(h.bShowAll){f._iDisplayStart=0;f._iDisplayLength=-1;f.oApi._fnCalculateEnd(f);f.oApi._fnDraw(f)}if(f.oScroll.sX!==""||f.oScroll.sY!==""){this._fnPrintScrollStart(f)}var l=f.aanFeatures;for(var m in l){if(m!="i"&&m!="t"&&m.length==1){for(var g=0,d=l[m].length;g<d;g++){this.dom.print.hidden.push({node:l[m][g],display:"block"});l[m][g].style.display="none"}}}c(a.body).addClass("DTTT_Print");if(h.sInfo!==""){var n=a.createElement("div");n.className="DTTT_print_info";n.innerHTML=h.sInfo;a.body.appendChild(n);setTimeout(function(){c(n).fadeOut("normal",function(){a.body.removeChild(n)})},2000)}if(h.sMessage!==""){this.dom.print.message=a.createElement("div");this.dom.print.message.className="DTTT_PrintMessage";this.dom.print.message.innerHTML=h.sMessage;a.body.insertBefore(this.dom.print.message,a.body.childNodes[0])}this.s.print.saveScroll=c(b).scrollTop();b.scrollTo(0,0);this.s.print.funcEnd=function(o){j._fnPrintEnd.call(j,o)};c(a).bind("keydown",null,this.s.print.funcEnd)},_fnPrintEnd:function(j){if(j.keyCode==27){j.preventDefault();var g=this;var d=this.s.dt;var h=this.s.print;var f=this.dom.print;this._fnPrintShowNodes();if(d.oScroll.sX!==""||d.oScroll.sY!==""){this._fnPrintScrollEnd()}b.scrollTo(0,h.saveScroll);if(f.message!==null){a.body.removeChild(f.message);f.message=null}c(a.body).removeClass("DTTT_Print");d._iDisplayStart=h.saveStart;d._iDisplayLength=h.saveLength;d.oApi._fnCalculateEnd(d);d.oApi._fnDraw(d);c(a).unbind("keydown",this.s.print.funcEnd);this.s.print.funcEnd=null}},_fnPrintScrollStart:function(){var f=this.s.dt,h=f.nScrollHead.getElementsByTagName("div")[0],d=h.getElementsByTagName("table")[0],j=f.nTable.parentNode;var e=f.nTable.getElementsByTagName("thead");if(e.length>0){f.nTable.removeChild(e[0])}if(f.nTFoot!==null){var g=f.nTable.getElementsByTagName("tfoot");if(g.length>0){f.nTable.removeChild(g[0])}}e=f.nTHead.cloneNode(true);f.nTable.insertBefore(e,f.nTable.childNodes[0]);if(f.nTFoot!==null){g=f.nTFoot.cloneNode(true);f.nTable.insertBefore(g,f.nTable.childNodes[1])}if(f.oScroll.sX!==""){f.nTable.style.width=c(f.nTable).outerWidth()+"px";j.style.width=c(f.nTable).outerWidth()+"px";j.style.overflow="visible"}if(f.oScroll.sY!==""){j.style.height=c(f.nTable).outerHeight()+"px";j.style.overflow="visible"}},_fnPrintScrollEnd:function(){var d=this.s.dt,e=d.nTable.parentNode;if(d.oScroll.sX!==""){e.style.width=d.oApi._fnStringToCss(d.oScroll.sX);e.style.overflow="auto"}if(d.oScroll.sY!==""){e.style.height=d.oApi._fnStringToCss(d.oScroll.sY);e.style.overflow="auto"}},_fnPrintShowNodes:function(){var f=this.dom.print.hidden;for(var e=0,d=f.length;e<d;e++){f[e].node.style.display=f[e].display}f.splice(0,f.length)},_fnPrintHideNodes:function(e){var g=this.dom.print.hidden;var j=e.parentNode;var k=j.childNodes;for(var f=0,d=k.length;f<d;f++){if(k[f]!=e&&k[f].nodeType==1){var h=c(k[f]).css("display");if(h!="none"){g.push({node:k[f],display:h});k[f].style.display="none"}}}if(j.nodeName!="BODY"){this._fnPrintHideNodes(j)}}};TableTools._aInstances=[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){var e=[];for(var f=0,d=TableTools._aInstances.length;f<d;f++){if(TableTools._aInstances[f].s.master){e.push(TableTools._aInstances[f].s)}}return e};TableTools.fnGetInstance=function(f){if(typeof f!="object"){f=a.getElementById(f)}for(var e=0,d=TableTools._aInstances.length;e<d;e++){if(TableTools._aInstances[e].s.master&&TableTools._aInstances[e].dom.table==f){return TableTools._aInstances[e]}}return null};TableTools._fnEventListen=function(f,e,d){TableTools._aListeners.push({that:f,type:e,fn:d})};TableTools._fnEventDispatch=function(j,g,h){var f=TableTools._aListeners;for(var e=0,d=f.length;e<d;e++){if(j.dom.table==f[e].that.dom.table&&f[e].type==g){f[e].fn(h)}}};TableTools.BUTTONS={csv:{sAction:"flash_save",sCharSet:"utf8",bBomInc:false,sFileName:"*.csv",sFieldBoundary:"'",sFieldSeperator:",",sNewLine:"auto",sTitle:"",sToolTip:"",sButtonClass:"DTTT_button_csv",sButtonClassHover:"DTTT_button_csv_hover",sButtonText:"CSV",mColumns:"all",bHeader:true,bFooter:true,bSelectedOnly:false,fnMouseover:null,fnMouseout:null,fnClick:function(e,f,d){this.fnSetText(d,this.fnGetTableData(f))},fnSelect:null,fnComplete:null,fnInit:null},xls:{sAction:"flash_save",sCharSet:"utf16le",bBomInc:true,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",sTitle:"",sToolTip:"",sButtonClass:"DTTT_button_xls",sButtonClassHover:"DTTT_button_xls_hover",sButtonText:"Excel",mColumns:"all",bHeader:true,bFooter:true,bSelectedOnly:false,fnMouseover:null,fnMouseout:null,fnClick:function(e,f,d){this.fnSetText(d,this.fnGetTableData(f))},fnSelect:null,fnComplete:null,fnInit:null},copy:{sAction:"flash_copy",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",sToolTip:"",sButtonClass:"DTTT_button_copy",sButtonClassHover:"DTTT_button_copy_hover",sButtonText:"Copy",mColumns:"all",bHeader:true,bFooter:true,bSelectedOnly:false,fnMouseover:null,fnMouseout:null,fnClick:function(e,f,d){this.fnSetText(d,this.fnGetTableData(f))},fnSelect:null,fnComplete:function(h,j,g,k){var e=k.split("\n").length,d=this.s.dt.nTFoot===null?e-1:e-2,f=(d==1)?"":"s";alert("Copied "+d+" row"+f+" to the clipboard")},fnInit:null},pdf:{sAction:"flash_pdf",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"\n",sFileName:"*.pdf",sToolTip:"",sTitle:"",sButtonClass:"DTTT_button_pdf",sButtonClassHover:"DTTT_button_pdf_hover",sButtonText:"PDF",mColumns:"all",bHeader:true,bFooter:false,bSelectedOnly:false,fnMouseover:null,fnMouseout:null,sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(e,f,d){this.fnSetText(d,"title:"+this.fnGetTitle(f)+"\nmessage:"+f.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(f)+"\norientation:"+f.sPdfOrientation+"\nsize:"+f.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(f))},fnSelect:null,fnComplete:null,fnInit:null},print:{sAction:"print",sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sMessage:"",bShowAll:true,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonClassHover:"DTTT_button_print_hover",sButtonText:"Print",fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null},text:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Text button",mColumns:"all",bHeader:true,bFooter:true,bSelectedOnly:false,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null},select:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select button",mColumns:"all",bHeader:true,bFooter:true,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:function(d,e){if(this.fnGetSelected().length!==0){c(d).removeClass("DTTT_disabled")}else{c(d).addClass("DTTT_disabled")}},fnComplete:null,fnInit:function(d,e){c(d).addClass("DTTT_disabled")}},select_single:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select button",mColumns:"all",bHeader:true,bFooter:true,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:function(e,f){var d=this.fnGetSelected().length;if(d==1){c(e).removeClass("DTTT_disabled")}else{c(e).addClass("DTTT_disabled")}},fnComplete:null,fnInit:function(d,e){c(d).addClass("DTTT_disabled")}},select_all:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select all",mColumns:"all",bHeader:true,bFooter:true,fnMouseover:null,fnMouseout:null,fnClick:function(d,e){this.fnSelectAll()},fnSelect:function(d,e){if(this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()){c(d).addClass("DTTT_disabled")}else{c(d).removeClass("DTTT_disabled")}},fnComplete:null,fnInit:null},select_none:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Deselect all",mColumns:"all",bHeader:true,bFooter:true,fnMouseover:null,fnMouseout:null,fnClick:function(d,e){this.fnSelectNone()},fnSelect:function(d,e){if(this.fnGetSelected().length!==0){c(d).removeClass("DTTT_disabled")}else{c(d).addClass("DTTT_disabled")}},fnComplete:null,fnInit:function(d,e){c(d).addClass("DTTT_disabled")}},ajax:{sAction:"text",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"\n",sAjaxUrl:"/xhr.php",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Ajax button",mColumns:"all",bHeader:true,bFooter:true,bSelectedOnly:false,fnMouseover:null,fnMouseout:null,fnClick:function(e,f){var d=this.fnGetTableData(f);c.ajax({url:f.sAjaxUrl,data:[{name:"tableData",value:d}],success:f.fnAjaxComplete,dataType:"json",type:"POST",cache:false,error:function(){alert("Error detected when sending table data to server")}})},fnSelect:null,fnComplete:null,fnInit:null,fnAjaxComplete:function(d){alert("Ajax complete")}},collection:{sAction:"collection",sToolTip:"",sButtonClass:"DTTT_button_collection",sButtonClassHover:"DTTT_button_collection_hover",sButtonText:"Collection",fnMouseover:null,fnMouseout:null,fnClick:function(d,e){this._fnCollectionShow(d,e)},fnSelect:null,fnComplete:null,fnInit:null}};TableTools.DEFAULTS={sSwfPath:"media/swf/copy_cvs_xls_pdf.swf",sRowSelect:"none",sSelectedClass:"DTTT_selected",fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"]};TableTools.prototype.CLASS="TableTools";TableTools.VERSION="2.0.1";TableTools.prototype.VERSION=TableTools.VERSION;if(typeof c.fn.dataTable=="function"&&typeof c.fn.dataTableExt.fnVersionCheck=="function"&&c.fn.dataTableExt.fnVersionCheck("1.7.0")){c.fn.dataTableExt.aoFeatures.push({fnInit:function(f){var e=typeof f.oInit.oTableTools!="undefined"?f.oInit.oTableTools:{};var d=new TableTools(f.oInstance,e);TableTools._aInstances.push(d);return d.dom.container},cFeature:"T",sFeature:"TableTools"})}else{alert("Warning: TableTools 2 requires DataTables 1.7 or greater - www.datatables.net/download")}})(jQuery,window,document);